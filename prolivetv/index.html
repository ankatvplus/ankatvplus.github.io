<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M3U8 MP3 Player</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            text-align: center;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #16213e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        h1 { color: #0f3460; }
        .status {
            background: #0f3460;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.2em;
        }
        audio {
            width: 100%;
            margin: 20px 0;
        }
        .m3u8-info {
            background: #1a1a2e;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
            font-size: 12px;
            word-break: break-all;
        }
        a {
            color: #e94560;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸµ M3U8 MP3 OynatÄ±cÄ±</h1>
        
        <div class="status" id="status">
            ğŸ“» M3U8 yÃ¼kleniyor...
        </div>
        
        <audio id="audio" controls></audio>
        
        <div style="margin: 20px 0;">
            <button onclick="playM3U8()" style="background: #e94560; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">â–¶ï¸ YayÄ±nÄ± BaÅŸlat</button>
            <button onclick="copyM3ULink()" style="background: #0f3460; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">ğŸ“‹ M3U Linkini Kopyala</button>
        </div>
        
        <div class="m3u8-info" id="m3u8Info">
            <strong>ğŸ“ M3U8 DosyasÄ±:</strong> playlist.m3u8<br>
            <strong>ğŸµ MP3'ler:</strong> sarki1.mp3, sarki2.mp3, sarki3.mp3, sarki4.mp3<br>
            <strong>ğŸ”— M3U Linki:</strong> <span id="m3uLink">https://KULLANICIADINIZ.github.io/online-tv/tvlistesi.m3u</span>
        </div>
    </div>

    <script>
        const audio = document.getElementById('audio');
        const statusDiv = document.getElementById('status');
        
        function playM3U8() {
            // M3U8 dosyasÄ±nÄ±n URL'si
            const m3u8Url = 'playlist.m3u8';
            
            statusDiv.innerHTML = 'â³ M3U8 yÃ¼kleniyor...';
            
            // M3U8 dosyasÄ±nÄ± oku
            fetch(m3u8Url)
                .then(response => response.text())
                .then(data => {
                    console.log('M3U8 iÃ§eriÄŸi:', data);
                    
                    // M3U8'den MP3 dosyalarÄ±nÄ± bul
                    const lines = data.split('\n');
                    const mp3Files = [];
                    
                    for (let i = 0; i < lines.length; i++) {
                        if (lines[i].includes('.mp3')) {
                            mp3Files.push(lines[i].trim());
                        }
                    }
                    
                    if (mp3Files.length > 0) {
                        statusDiv.innerHTML = `âœ… M3U8 yÃ¼klendi! ${mp3Files.length} MP3 bulundu.<br>`;
                        statusDiv.innerHTML += `ğŸ“‹ SÄ±ra: ${mp3Files.join(' â†’ ')}`;
                        
                        // Ä°lk MP3'Ã¼ Ã§al
                        audio.src = mp3Files[0];
                        audio.play();
                        
                        // MP3 bittiÄŸinde sÄ±radakine geÃ§
                        let currentIndex = 0;
                        
                        audio.addEventListener('ended', function() {
                            currentIndex = (currentIndex + 1) % mp3Files.length;
                            audio.src = mp3Files[currentIndex];
                            audio.play();
                            statusDiv.innerHTML = `â–¶ï¸ Åimdi Ã§alÄ±yor: ${mp3Files[currentIndex]}`;
                        });
                        
                    } else {
                        statusDiv.innerHTML = 'âŒ M3U8 iÃ§inde MP3 bulunamadÄ±!';
                    }
                })
                .catch(error => {
                    console.error('Hata:', error);
                    statusDiv.innerHTML = 'âŒ M3U8 yÃ¼klenemedi! Dosya yollarÄ±nÄ± kontrol edin.';
                });
        }
        
        function copyM3ULink() {
            const link = document.getElementById('m3uLink').innerText;
            navigator.clipboard.writeText(link).then(() => {
                alert('âœ… M3U linki kopyalandÄ±: ' + link);
            });
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        window.onload = function() {
            // GitHub kullanÄ±cÄ± adÄ±nÄ± otomatik almak mÃ¼mkÃ¼n olmadÄ±ÄŸÄ± iÃ§in,
            // kullanÄ±cÄ±nÄ±n manuel olarak deÄŸiÅŸtirmesi gerekecek
            const user = prompt('GitHub kullanÄ±cÄ± adÄ±nÄ±zÄ± girin:', 'kullaniciadi');
            if (user) {
                document.getElementById('m3uLink').innerText = `https://${user}.github.io/online-tv/tvlistesi.m3u`;
            }
        };
    </script>
</body>
</html>
